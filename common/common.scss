// ═══════════════════════════════════════════════════════════════════════════
// ALGORITHMIC WARFARE - Discourse Theme
// Cyberpunk aesthetic matching awar.dev
// Supports both dark and light modes
// ═══════════════════════════════════════════════════════════════════════════

// ─────────────────────────────────────────────────────────────────────────────
// Variables - Dark Mode (Default)
// ─────────────────────────────────────────────────────────────────────────────

:root {
  --awar-bg: #000000;
  --awar-bg-elevated: #111111;
  --awar-bg-surface: #1a1a1a;
  --awar-text: #ffffff;
  --awar-text-muted: rgba(255, 255, 255, 0.5);
  --awar-orange: #ff9944;
  --awar-orange-dim: #cc7733;
  --awar-burgundy: #773333;
  --awar-burgundy-hover: #994444;
  --awar-border: rgba(255, 255, 255, 0.1);
  --awar-font: 'JetBrains Mono', 'Consolas', 'Monaco', monospace;
  --awar-code-bg: #1a1a1a;
  --awar-blockquote-bg: #111111;
  --awar-input-bg: #1a1a1a;
  --awar-scrollbar-track: #0a0a0a;
  --awar-scrollbar-thumb: #1a1a1a;
  --awar-modal-backdrop: rgba(0, 0, 0, 0.8);
}

// ─────────────────────────────────────────────────────────────────────────────
// Variables - Light Mode
// ─────────────────────────────────────────────────────────────────────────────

html.light-scheme {
  --awar-bg: #f5f5f5;
  --awar-bg-elevated: #ffffff;
  --awar-bg-surface: #e8e8e8;
  --awar-text: #1a1a1a;
  --awar-text-muted: rgba(26, 26, 26, 0.6);
  --awar-orange: #cc6622;
  --awar-orange-dim: #aa5511;
  --awar-burgundy: #994444;
  --awar-burgundy-hover: #773333;
  --awar-border: rgba(0, 0, 0, 0.1);
  --awar-code-bg: #e8e8e8;
  --awar-blockquote-bg: #eeeeee;
  --awar-input-bg: #ffffff;
  --awar-scrollbar-track: #e0e0e0;
  --awar-scrollbar-thumb: #cccccc;
  --awar-modal-backdrop: rgba(0, 0, 0, 0.5);
}

// Alternative selectors for light mode detection
body.light-scheme,
html[data-color-scheme="light"] body {
  --awar-bg: #f5f5f5;
  --awar-bg-elevated: #ffffff;
  --awar-bg-surface: #e8e8e8;
  --awar-text: #1a1a1a;
  --awar-text-muted: rgba(26, 26, 26, 0.6);
  --awar-orange: #cc6622;
  --awar-orange-dim: #aa5511;
  --awar-burgundy: #994444;
  --awar-burgundy-hover: #773333;
  --awar-border: rgba(0, 0, 0, 0.1);
  --awar-code-bg: #e8e8e8;
  --awar-blockquote-bg: #eeeeee;
  --awar-input-bg: #ffffff;
  --awar-scrollbar-track: #e0e0e0;
  --awar-scrollbar-thumb: #cccccc;
  --awar-modal-backdrop: rgba(0, 0, 0, 0.5);
}

// ─────────────────────────────────────────────────────────────────────────────
// Base Typography & Body
// ─────────────────────────────────────────────────────────────────────────────

html {
  font-family: var(--awar-font);
}

body {
  font-family: var(--awar-font);
  background-color: var(--awar-bg);
  color: var(--awar-text);
}

// Apply monospace font globally
.d-header,
.topic-list,
.topic-body,
.nav-pills,
.btn,
input,
textarea,
select,
.cooked,
.fancy-title,
.topic-title,
.category-name,
.discourse-tag,
.user-info,
#create-account,
#login-form,
.d-modal {
  font-family: var(--awar-font);
}

// ─────────────────────────────────────────────────────────────────────────────
// Header
// ─────────────────────────────────────────────────────────────────────────────

.d-header-wrap {
  border-bottom: 1px solid var(--awar-border);
}

.d-header {
  background-color: var(--awar-bg);

  .title {
    a {
      color: var(--awar-text);

      &:hover {
        color: var(--awar-orange);
      }
    }
  }

  .header-title {
    font-weight: 600;
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }
}

// Header icons
.d-header-icons {
  .icon {
    color: var(--awar-text);

    &:hover {
      background-color: var(--awar-bg-surface);
      color: var(--awar-orange);
    }
  }

  .d-icon {
    color: var(--awar-text);
  }
}

// ─────────────────────────────────────────────────────────────────────────────
// Navigation
// ─────────────────────────────────────────────────────────────────────────────

.nav-pills {
  > li {
    > a {
      color: var(--awar-text-muted);
      border-radius: 0;
      transition: all 0.2s ease;

      &:hover {
        background-color: var(--awar-bg-surface);
        color: var(--awar-orange);
      }

      &.active {
        background-color: var(--awar-burgundy);
        color: var(--awar-text);
      }
    }
  }
}

.list-controls {
  .nav-pills {
    background-color: transparent;
  }
}

// Category navigation
.category-list {
  border-color: var(--awar-border);

  th {
    color: var(--awar-text-muted);
    border-color: var(--awar-border);
  }

  td {
    border-color: var(--awar-border);
  }

  .category-name {
    color: var(--awar-text);
  }
}

// ─────────────────────────────────────────────────────────────────────────────
// Topic List
// ─────────────────────────────────────────────────────────────────────────────

.topic-list {
  th {
    color: var(--awar-text-muted);
    border-color: var(--awar-border);
  }

  td {
    border-color: var(--awar-border);
  }

  .topic-list-item {
    background-color: transparent;

    &:hover {
      background-color: var(--awar-bg-elevated);
    }
  }

  .main-link {
    .title {
      color: var(--awar-text);

      &:visited {
        color: var(--awar-text-muted);
      }

      &:hover {
        color: var(--awar-orange);
      }
    }
  }

  .link-bottom-line {
    .discourse-tags {
      .discourse-tag {
        color: var(--awar-orange-dim);

        &:hover {
          color: var(--awar-orange);
        }
      }
    }
  }
}

// Topic excerpts
.topic-excerpt {
  color: var(--awar-text-muted);
}

// ─────────────────────────────────────────────────────────────────────────────
// Topic View
// ─────────────────────────────────────────────────────────────────────────────

#topic-title {
  .fancy-title {
    color: var(--awar-text);
    font-weight: 600;
  }
}

.topic-body {
  background-color: transparent;

  .cooked {
    color: var(--awar-text);

    a {
      color: var(--awar-orange);

      &:hover {
        color: var(--awar-orange-dim);
      }
    }

    code {
      background-color: var(--awar-bg-surface);
      color: var(--awar-orange);
      border: 1px solid var(--awar-border);
    }

    pre {
      background-color: var(--awar-bg-elevated);
      border: 1px solid var(--awar-border);

      code {
        background-color: transparent;
        border: none;
        color: var(--awar-text);
      }
    }

    blockquote {
      background-color: var(--awar-bg-elevated);
      border-left: 3px solid var(--awar-orange);
      color: var(--awar-text-muted);
    }

    h1, h2, h3, h4, h5, h6 {
      color: var(--awar-text);
    }
  }
}

.topic-map {
  background-color: var(--awar-bg-elevated);
  border: 1px solid var(--awar-border);

  section {
    border-color: var(--awar-border);
  }
}

// Post actions
.post-menu-area {
  .btn-flat {
    color: var(--awar-text-muted);

    &:hover {
      color: var(--awar-orange);
      background-color: var(--awar-bg-surface);
    }
  }
}

// ─────────────────────────────────────────────────────────────────────────────
// Buttons
// ─────────────────────────────────────────────────────────────────────────────

.btn {
  font-family: var(--awar-font);
  font-weight: 500;
  border-radius: 0;
  transition: all 0.2s ease;
}

.btn-primary {
  background-color: var(--awar-burgundy);
  color: var(--awar-text);
  border: none;

  &:hover,
  &:focus {
    background-color: var(--awar-burgundy-hover);
    color: var(--awar-text);
  }

  .d-icon {
    color: var(--awar-text);
  }
}

.btn-default {
  background-color: var(--awar-bg-surface);
  color: var(--awar-text);
  border: 1px solid var(--awar-border);

  &:hover,
  &:focus {
    background-color: var(--awar-bg-elevated);
    color: var(--awar-orange);
    border-color: var(--awar-orange);
  }
}

.btn-danger {
  background-color: #cc4444;

  &:hover {
    background-color: #dd5555;
  }
}

// New topic button - special orange accent
#create-topic {
  background-color: var(--awar-burgundy);

  &:hover {
    background-color: var(--awar-burgundy-hover);
  }
}

// ─────────────────────────────────────────────────────────────────────────────
// Categories
// ─────────────────────────────────────────────────────────────────────────────

.badge-category {
  font-family: var(--awar-font);
}

.category-box {
  background-color: var(--awar-bg-elevated);
  border: 1px solid var(--awar-border);

  &:hover {
    border-color: var(--awar-orange);
  }
}

.badge-wrapper {
  &.bullet {
    .badge-category-bg {
      background-color: var(--awar-orange);
    }
  }
}

// ─────────────────────────────────────────────────────────────────────────────
// Tags
// ─────────────────────────────────────────────────────────────────────────────

.discourse-tag {
  font-family: var(--awar-font);
  color: var(--awar-orange-dim);
  background-color: transparent;
  border: 1px solid var(--awar-border);

  &:hover {
    color: var(--awar-orange);
    border-color: var(--awar-orange);
  }
}

// ─────────────────────────────────────────────────────────────────────────────
// User Elements
// ─────────────────────────────────────────────────────────────────────────────

.user-card,
.group-card {
  background-color: var(--awar-bg-elevated);
  border: 1px solid var(--awar-border);

  h1, h2, h3 {
    color: var(--awar-text);
  }

  .user-card-avatar {
    background-color: var(--awar-bg);
  }
}

.names {
  .username {
    color: var(--awar-orange);
  }

  .full-name {
    color: var(--awar-text-muted);
  }
}

// User avatars
.avatar {
  border-radius: 0;
}

// ─────────────────────────────────────────────────────────────────────────────
// Form Elements
// ─────────────────────────────────────────────────────────────────────────────

input[type="text"],
input[type="password"],
input[type="email"],
input[type="number"],
textarea,
select,
.select-kit .select-kit-header {
  font-family: var(--awar-font);
  background-color: var(--awar-bg-surface);
  color: var(--awar-text);
  border: 1px solid var(--awar-border);
  border-radius: 0;

  &:focus {
    border-color: var(--awar-orange);
    outline: none;
    box-shadow: 0 0 0 1px var(--awar-orange);
  }

  &::placeholder {
    color: var(--awar-text-muted);
  }
}

.select-kit {
  .select-kit-collection {
    background-color: var(--awar-bg-surface);
    border: 1px solid var(--awar-border);
  }

  .select-kit-row {
    color: var(--awar-text);

    &:hover,
    &.is-highlighted {
      background-color: var(--awar-bg-elevated);
      color: var(--awar-orange);
    }

    &.is-selected {
      background-color: var(--awar-burgundy);
    }
  }
}

// ─────────────────────────────────────────────────────────────────────────────
// Modals
// ─────────────────────────────────────────────────────────────────────────────

.modal-inner-container {
  background-color: var(--awar-bg-elevated);
  border: 1px solid var(--awar-border);
  border-radius: 0;

  .modal-header {
    border-bottom: 1px solid var(--awar-border);
  }

  .modal-footer {
    border-top: 1px solid var(--awar-border);
  }
}

.modal-backdrop {
  background-color: rgba(0, 0, 0, 0.8);
}

// Login modal
#login-form,
#create-account {
  background-color: var(--awar-bg-elevated);

  .login-title,
  .create-account-title {
    color: var(--awar-text);
  }
}

// ─────────────────────────────────────────────────────────────────────────────
// Composer
// ─────────────────────────────────────────────────────────────────────────────

#reply-control {
  background-color: var(--awar-bg-elevated);
  border-top: 1px solid var(--awar-border);

  .reply-to {
    color: var(--awar-text-muted);
  }

  .d-editor-textarea-wrapper {
    background-color: var(--awar-bg-surface);
    border: 1px solid var(--awar-border);

    textarea {
      background-color: transparent;
    }
  }

  .d-editor-button-bar {
    background-color: var(--awar-bg);

    .btn {
      color: var(--awar-text-muted);

      &:hover {
        color: var(--awar-orange);
        background-color: var(--awar-bg-surface);
      }
    }
  }
}

.d-editor-preview {
  background-color: var(--awar-bg);
  color: var(--awar-text);
}

// ─────────────────────────────────────────────────────────────────────────────
// Alerts & Notices
// ─────────────────────────────────────────────────────────────────────────────

.alert {
  border-radius: 0;
  border: 1px solid var(--awar-border);

  &.alert-info {
    background-color: var(--awar-bg-elevated);
    color: var(--awar-text);
    border-left: 3px solid var(--awar-orange);
  }

  &.alert-warning {
    background-color: rgba(255, 153, 68, 0.1);
    border-left: 3px solid var(--awar-orange);
  }

  &.alert-error {
    background-color: rgba(204, 68, 68, 0.1);
    border-left: 3px solid #cc4444;
  }

  &.alert-success {
    background-color: rgba(68, 204, 102, 0.1);
    border-left: 3px solid #44cc66;
  }
}

// ─────────────────────────────────────────────────────────────────────────────
// Suggested Topics
// ─────────────────────────────────────────────────────────────────────────────

.suggested-topics {
  .topic-list-item {
    border-color: var(--awar-border);
  }
}

// ─────────────────────────────────────────────────────────────────────────────
// Footer
// ─────────────────────────────────────────────────────────────────────────────

.custom-footer {
  background-color: var(--awar-bg);
  border-top: 1px solid var(--awar-border);
  color: var(--awar-text-muted);

  a {
    color: var(--awar-orange);

    &:hover {
      color: var(--awar-orange-dim);
    }
  }
}

// ─────────────────────────────────────────────────────────────────────────────
// Scrollbar
// ─────────────────────────────────────────────────────────────────────────────

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--awar-bg);
}

::-webkit-scrollbar-thumb {
  background: var(--awar-bg-surface);
  border: 1px solid var(--awar-border);

  &:hover {
    background: var(--awar-burgundy);
  }
}

// ─────────────────────────────────────────────────────────────────────────────
// Selection
// ─────────────────────────────────────────────────────────────────────────────

::selection {
  background-color: var(--awar-burgundy);
  color: var(--awar-text);
}

// ─────────────────────────────────────────────────────────────────────────────
// Loading Spinner
// ─────────────────────────────────────────────────────────────────────────────

.spinner {
  border-color: var(--awar-orange);
  border-right-color: transparent;
}

// ─────────────────────────────────────────────────────────────────────────────
// Badges
// ─────────────────────────────────────────────────────────────────────────────

.badge-notification {
  background-color: var(--awar-burgundy);
  color: var(--awar-text);
  border-radius: 0;
}

.badge-posts {
  color: var(--awar-orange);
}

// ─────────────────────────────────────────────────────────────────────────────
// Search
// ─────────────────────────────────────────────────────────────────────────────

.search-container {
  .search-input {
    background-color: var(--awar-bg-surface);
    border: 1px solid var(--awar-border);

    input {
      background-color: transparent;
    }
  }
}

.search-menu {
  background-color: var(--awar-bg-elevated);
  border: 1px solid var(--awar-border);

  .search-result-topic {
    .topic-title {
      color: var(--awar-text);

      &:hover {
        color: var(--awar-orange);
      }
    }
  }
}

// ─────────────────────────────────────────────────────────────────────────────
// Admin Sidebar
// ─────────────────────────────────────────────────────────────────────────────

.admin-main-nav {
  background-color: var(--awar-bg-elevated);
  border-right: 1px solid var(--awar-border);
}

// ─────────────────────────────────────────────────────────────────────────────
// Cyberpunk Accent Elements
// ─────────────────────────────────────────────────────────────────────────────

// Add bracket notation to category headers (like on awar.dev)
.category-title-link {
  &::before {
    content: "「 ";
    color: var(--awar-orange);
    font-weight: 400;
  }

  &::after {
    content: " 」";
    color: var(--awar-orange);
    font-weight: 400;
  }
}

// Orange accent line for important elements
.topic-post:first-of-type {
  .topic-body {
    border-left: 2px solid var(--awar-orange);
    padding-left: 15px;
  }
}

// Glow effect on focus
.btn-primary:focus,
a:focus {
  box-shadow: 0 0 0 2px rgba(255, 153, 68, 0.3);
}

// ─────────────────────────────────────────────────────────────────────────────
// Timeline
// ─────────────────────────────────────────────────────────────────────────────

.topic-timeline {
  .timeline-handle {
    background-color: var(--awar-burgundy);
  }

  .timeline-scrollarea {
    border-color: var(--awar-border);
  }
}
